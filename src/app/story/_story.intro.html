<section class="story-intro"
         ng-class="{
          'state--loading' : storyVM.states.loading
         }"
         > <!-- back-img="{{storyVM.story.profile_image_urls[0].original}}" -->
  <story-intro-canvas id="story-intro-canvas-{{storyVM.id}}" ng-if="storyVM.states.loaded"
                      img="storyVM.story.profile_image_urls[0]"
                      blur-img="{{storyVM.story.profile_image_urls[0].thumbnail}}"></story-intro-canvas>
  <div class="overlay"></div>
  <div class="fade"></div>
  <div class="content-wrapper">
    <div class="content">
      <h1 class="story-intro-title">
        <a ng-href="#/s/{{::storyVM.id}}/{{::storyVM.story.title | slugify }}" ng-bind="storyVM.story.title"></a>
      </h1>
      <h2 class="story-intro-subtitle" ng-bind="storyVM.story.description"></h2>
      <h2 class="story-intro-subtitle show--loading">loading...</h2>
    </div>
  </div>
  <site-header class=""></site-header>
  <div class="story-intro__option" ng-if="storyVM.states.editing" ng-show="storyVM.states.loaded">
    <story-add-page></story-add-page>
  </div>
  <div class="story-intro__left" ng-show="storyVM.states.loaded">
    <div class="story-intro__author">
      <span class="thumb"></span>
      <span class="text" ng-bind="::storyVM.story.author.username"></span>
    </div>
    <!--<button class="story-edit-toggle btn&#45;&#45;reset"-->
            <!--ng-if="storyVM.states.author"-->
            <!--ng-click="storyVM.states.editing = !storyVM.states.editing"-->
            <!--ng-class="{-->
            <!--'state&#45;&#45;active' : storyVM.states.editing-->
          <!--}">-->
      <!--<span>Edit Mode</span>-->
      <!--<span class="indicator"></span>-->
    <!--</button>-->
  </div>
  <div class="story-intro__stats" ng-show="storyVM.states.loaded">
    <div ng-if="storyVM.states.author" class="story-intro__author-controls">
      <div class="btn-wrapper">
        <button
          class="btn btn--control"
          ng-class="{
                'state--active' : storyVM.states.editing
              }"
          ng-click="storyVM.toggleEditing();">
          <span class="icon icon-pencil"></span>
        </button>
      </div>
      <div class="btn-wrapper upload-image-preview-wrapper">
        <button ngf-select="storyVM.uploadProfileImage($file);"
                class="btn btn--control">
          <span class="icon icon-picture"></span>
        </button>
        <story-profile-image-preview ng-if="storyVM.states.profileImage.busy"></story-profile-image-preview>
      </div>
      <div class="btn-wrapper">
        <button ng-click="storyVM.deleteStory();"
                class="btn btn--control">
          <span class="icon icon-trash"></span>
        </button>
      </div>
    </div>
    <story-like-button></story-like-button>
  </div>
</section>
